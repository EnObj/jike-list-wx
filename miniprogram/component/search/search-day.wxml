<template is="{{mode}}" data="{{list, channels, keyword, whereDate, today,count}}">
</template>

<template name="page">
  <view class="filter-bar" hidden="{{!list}}">
    <view wx:for="{{['历史','今日','预告']}}" wx:key="*this" class="date-filter {{whereDate==item?'active-date-filter':''}}" bindtap="searchWithDate" data-date="{{item}}">{{item}}</view>
  </view>
  <view class="result-bar">
    <view wx:for="{{list}}" wx:key="_id" class="channel-result">
      <view class="flex-between channel-result-title">
        <view>
          <navigator url="/pages/channel/channel?channel={{item.channelCode}}&date={{item.date}}">
            <channel-logo channel-code="{{item.channelCode}}" />
          </navigator>
        </view>
        <view hidden="{{whereDate=='今日'}}" class="not-importent">{{item.dateObj.showDate}}</view>
      </view>
      <program-list program-list="{{item}}" />
    </view>
    <view class="not-importent message" hidden="{{count}}">
      没有结果
    </view>
  </view>
</template>

<template name="card">
  <view class="padding-box" style="padding:0px;">
    <view class="flex-between" style="padding:10px;border-bottom:1px #f2f2f2 solid;">
      <view>今日</view>
      <view class="flex-between not-importent">
        <navigator url="/pages/search/search-day?keyword={{keyword}}&whereDate=历史">
          <view style="margin-right:5px;">历史</view>
        </navigator>
        <navigator url="/pages/search/search-day?keyword={{keyword}}&whereDate=预告">
          <view>预告</view>
        </navigator>
        <navigator url="/pages/search/search-day?keyword={{keyword}}" hidden="{{count==list.length}}">
          <view style="color:gray;margin-left:10px;">更多</view>
        </navigator>
      </view>
    </view>
    <view>
      <view wx:for="{{list}}" wx:key="_id">
        <view class="flex-between channel-result-title">
          <view>
            <navigator url="/pages/channel/channel?channel={{item.channelCode}}&date={{item.date}}">
              <channel-logo channel-code="{{item.channelCode}}" />
            </navigator>
          </view>
          <view hidden="{{whereDate=='今日'}}" class="not-importent">{{item.dateObj.showDate}}</view>
        </view>
        <program-list program-list="{{item}}" />
      </view>
      <view class="not-importent message" hidden="{{count}}">
        没有结果
      </view>
    </view>
  </view>
</template>